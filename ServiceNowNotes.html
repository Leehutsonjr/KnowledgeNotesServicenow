<!DOCTYPE html>
<html lang="en">
	<head>
		<title>ServiceNow Notes</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"/>-->	
	<style>
	table {
		border-spacing: 0;
		width: 100%;
		border: 1px solid #ddd;
	}
	th, td {
		text-align: left;
		padding: 16px;
	}
	</style>		
	</head>
	<body>
		<div class="container mt-3">
				<h3>ServiceNow Notes</h3>
				<h6>In your "now learning" account you have a group of saves things called "stufftolearn"</h6>
				<h5>General Notes:</h5>
				<p>
					<ul>
						<li>Make sure you create an update set and navigate to that update set when about to develop</li>
						<li>When the process or app is done remember to set the update set state to complete</li>
						<li>If you set the update set state to COMPLETE, you will not have the option to choose that update set</li>
						<li>workflow.scratchpad.variableName</variable>
						</li>
						<li>current.variables.anyVariableName</li>
						<li>When getting a variable isnt working remember</li>
						<li>reference field? use getDisplayValue()</li>
						<li>String field you can assign direct</li>
						<li>If you have not received any branding (images etc) then it is<br>pretty much assumed
						that you will get the branding yourself</li>
				</ul>
			</p>
			<h5>Workflow.scratchpad</h5>
			<p>
			<ul>
				<li>Doesn't work with Flow.  Instead just use Variables</li>
				<li/>
				<li/>
				<li/>
			</ul>
			</p>
			<h5>Creating a Catalog Item Exercise</h5>
			<p>
			<ol>
				<li>I went into the service catalog "Catalog Definitions" under "Maintain Catalogs" and gave the admin the itam (asset manager) role</li>
				<li>Impersonate the asset manager</li>
				<li>Goto the catalog builder</li>
				<li>Use standard items template</li>
				<li>Fill out information</li>
				<li>Select the category (All were selected from the template, but you only need the hardware one</li>
				<li>Click "continue to questions"</li>
				<li>Create a variable (question) which includes a label, whether its mandatory or not and some choices</li>
					<li>Continue on to select a flow to be associated with this catalog item (which was already created)</li>
				<li>I was able to preview before submitting</li>
				<li>Review and submit</li>
				<li>Add pricing by returning to the instance (from the catalog builder) and going to maintain items</li>
				<li>Find the infinity CI and edit the pricing and save</li>
				<li>Goto one of the selections possible (the memory choice for instance) and add 100 price when that one is selected</li>
				<li>Click update to save</li>
				<li>preview the item by going to maintain items, finding the item and clicking "try it"</li>
				<li/>
			</ol>
			</p>
			<p>
			<h5>ATF Exercise</h5>
			<ol>
			<li>fill this in thanks!</li>
			</ol>
			</p>
			<p>
			<p>
			<h5>Save Instance Preferences</h5>
			<ul>
			<li>Save Bookmark xml</li>
			<li>Save userpreferences xml</li>
			<li>go to the menu filter and type sys_ui_bookmark.list<br>Filter on records where the user column has your values<br>Then use Export XML from the list menu to save as XML</li>
			<li>But this would not work onchange</li>
			</ul>
			</p>
			<p>
			<h5>Reference qualifiers</h5>
			<ul>
			<li>In Catalog items</li>
			<li><a href="https://www.servicenow.com/community/now-platform-blog/reference-qualifiers-in-service-catalog/ba-p/2282759">Reference qualifiers</a></li>
			<li>For catalog item advanced that was getting the display value from a reference field I had to use:
			<li><strong>Example Code:</strong><br>
			Here is an example of a reference qualifier that changes the filter on a reference field every time a dependant field changes:<br><br>
			javascript: "company.sys_id=" + current.variables.customer + "^u_environment_nameNOT LIKEAIS"<br><br>

			if(current.vaiables.customer.changes()){<br>
			"company.sys_id=" + current.variables.customer + "^u_environment_nameNOT LIKEAIS"<br>
			}<br> 
			</ul>
			</p>
			<p>
			<h5>Script Includes</h5></h5>
			<ul>
			<li>The reason I had som much problems with a script include:</li>
			<li>This article shows the different types of script includes:</li>
			<li>https://www.learnnowlab.com/Script-Include/</li>
			<li>I didnt have either initialize function OR abstract ajaxprocessor on my script include! it was not being called!</li>
			<li>solution: I put Object.extendsObject(AbstractAjaxProcessor in there and it worked!</li>
			</ul>
			</p>
			<p>
			<h5>Mandatory on close for task or ritm</h5>
			<ul>
			<li>These links show the solution I found</li>
			<li><a href="https://www.youtube.com/watch?v=zvSwzPRgAbw">Here is a VIDEO on ref quals</a></li>
			<li><a href="https://www.servicenow.com/community/now-platform-blog/what-is-the-best-way-to-make-catalog-task-variables-mandatory-on/ba-p/2287043">What is the Best Way to Make Catalog Task Variables Mandatory on Closure?</a></li>
			<li><a href="https://www.servicenow.com/community/developer-forum/make-variable-field-required-on-sc-task-closed-complete/m-p/1450488">Make variable field required on SC_TASK closed complete</a></li>
			<li>Here is the solution</li>
			<li>The final configuration
filter conditions:<br> request item.item is "laptop refresh"<br>state is closed complete<br>

Scripts<br>
Execute if true<br>
function onCondition() {<br>
	g_form.setMandatory('office_use_only',true);<br>
}<br>
Execute if false<br>
function onCondition() {<br>
	g_form.setMandatory('office_use_only',false);<br>
}</li>
			</ul>
			</p>
			<p>
			<h5>Remove user from email notifications</h5>
			<ol>
			<li>first step is to see if they can use the personal preferences and see if that works for them</li>
			<li><a href="https://www.servicenow.com/community/itsm-forum/remove-a-recipient-from-a-email-notification/m-p/746357">Remove a recipient from a Email Notification</a></li>
			<li></li>
			</ol>
			</p>
			<p>
			<h5>Add someone to the watch list watchlist from workflow</h5>
			<ul>
			<li>Use this to get the group members (this is a script include):<br>var group = new GroupMembers().getMember('Compensation Support');<br>then loop for each comma separated value its:<br>current.watch_list +=</li>
			<li></li>
			<li></li>
			</ul>
			</p>
			<p>
			<h5>Order guide hiding fields new hire variable sets reuse them</h5>
			<h6>hide variable set, hide fields, choose options</h6>
			<ol>
			<li>if you want to use a variable set, try creating a separate variable (ex: new hire or approval</li>
			<li>This new variable must have the same exact name as the one in the variable set you are not using</li>
			<li>it will pick up automation like with the other variable set (ex: OS Standard Requestor </li>
			<li>Also, you can use the outer UI policies and client script to access variable sets instead<br> of using the UI policies inside the actual variable set.  Ex: see Segtico Catalog Item</li>
			<li>so in reality you really didnt need to create a new variable set, all you had to do is use a simplere variable set and<br> create new separate variables with the same name<br>MAYBE? </li>
			</ol>
			</p>
			<p>
			<h5>Service Portal Header menu / </h5>
			<h6>#service portal navigation banner servicenow</h6>
			<ul>
			<li><a href="https://docs.servicenow.com/en-US/bundle/tokyo-servicenow-platform/page/build/service-portal/task/configure-header-menu.html">Documentation on portal header menu</a></li>
			<li></li>
			<li></li>
			</ul>
			</p>
			<p>
			<h5>How to stop a backgrouns script from running</h5>
			<h6>#background script, kill </h6>
			<ul>
			<li><a href="https://www.servicenow.com/community/developer-forum/stop-background-script/m-p/1871965">Stop Background Script</a></li>
			<li><a href="https://www.servicenow.com/community/developer-forum/i-ran-this-script-in-the-background-and-it-doesn-t-stop-running/m-p/1610681">I ran this script in the background and it doesn't stop running and everything is slow, how do I stop it if I can't load any pages?</a></li>
			<li></li>
			</ul>
			</p>
			<p>
			<h5>If it contains or indexOf</h5>
			<h6>#</h6>
			<ul>
			<li><a href="https://www.servicenow.com/community/developer-forum/use-indexof-to-check-field-for-certain-characters/m-p/1648931">Use indexOf to check field for certain characters.</a></li>
			<li></li>
			<li></li>
			</ul>
			</p>
			
			------------------------------------
			<p>
			<h5></h5>
			<h6>#</h6>
			<ul>
			<li></li>
			<li></li>
			<li></li>
			</ul>
			</p>
			<a href="url">link text</a>
			<h5>Delegated Developer</h5>
			<ul>
				<li>"Manage collaborators" is the new manage developers</li>
				<li>If there are no approvers in the "app engine admins" group, the collaboration request will NOT go through</li>
				<li>Once I added an approver to the group, depending on the approver, it automatically added the collaborator<br> or sent the request to "my approvals" </li>
				</\ul>
			</p>	
			<p>
				<button onclick="sortTable()">Sort</button>
			</p>
			<p>
			<h3>Table Names and Info</h3>
				<table id="myTable">
					<th>Category</th>
					<th>Label</th>
					<th>Name</th>
					<th>Description</th>
					<tr>
						<td>Event</td>
						<td>Event</td>
						<td>sysevent</td>
						<td/>
					</tr>
					<tr>
						<td>ATF</td>
						<td>Test</td>
						<td>sys_atf_test</td>
						<td>Each test is a record on this table</td>
					</tr>
					<tr>
						<td>ATF</td>
						<td>Step Result</td>
						<td>sys_atf_test_result_step</td>
						<td>Each test result is a record on this table</td>
					</tr>
					<tr>
						<td>ATF</td>
						<td>Step Configuration</td>
						<td>sys_atf_step_config</td>
						<td>Each step configuration is a record on this table</td>
					</tr>
					<tr>
						<td></td>
						<td>History</td>
						<td>sys_history_line</td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td>ECC Queue</td>
						<td>ecc_queue</td>
						<td></td>
					</tr>
					<tr>
						<td>Email</td>
						<td>Email</td>
						<td>sys_email</td>
						<td></td>
					</tr>
					<tr>
						<td>Email</td>
						<td>Email Log</td>
						<td>sys_email_log</td>
						<td></td>
					</tr>
					<tr>
						<td>Report</td>
						<td>Report Execution</td>
						<td>report_executions</td>
						<td></td>
					</tr>
					<tr>
						<td>Report</td>
						<td>Report Stats</td>
						<td>report_stats</td>
						<td></td>
					</tr>
					<tr>
						<td>Table</td>
						<td>Table</td>
						<td>sys_db_object</td>
						<td>This is the table that lists all the tables in servicenow</td>
					</tr>
					<tr>
						<td>Change</td>
						<td>Change Request</td>
						<td>change_request</td>
						<td>This is the table that has all the change requests</td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td>sys_app_module</td>
						<td></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</table>
			</p>
			<p>
			<h5>Code Snippets</h5>
			<p>
			<h6>Name: GroupMembers</h6>
			var groupName = 'Customer Success';<br>
			var g = new GlideRecord('sys_user_grmember');<br>
			g.addQuery('group.name'+groupName);<br>
			g.query();<br>
			while(g.Next()){<br>
			members += g.user.email.toString();<br>
			if(g.hasNext()) {<br>
			members += ',';<br>
			}<br>
			}<br>
			Notes: With this code I had a problem accessing the reference values.<br> 
			SOLUTION: I was able to concatinate the query with a variable.<br>  
			Also, my dot walking wasnt correct initially so that was fixed.<br>
			</p>
			</p>
		</div>
		<script>
			function sortTable() {
			  var table, rows, switching, i, x, y, shouldSwitch;
			  table = document.getElementById("myTable");
			  switching = true;
			  /*Make a loop that will continue until
			  no switching has been done:*/
			  while (switching) {
				//start by saying: no switching is done:
				switching = false;
				rows = table.rows;
				/*Loop through all table rows (except the
				first, which contains table headers):*/
				for (i = 1; i < (rows.length - 1); i++) { 
				//start by saying there should be no switching: 
				shouldSwitch=false; 
				/*Get the two elements you want to compare, one from current row and one from the next:*/ 
				x=rows[i].getElementsByTagName("TD" )[0]; y=rows[i + 1].getElementsByTagName("TD")[0]; 
				//check if the two rows should switch place: 
				if (x.innerHTML.toLowerCase()> y.innerHTML.toLowerCase()) { 
				//if so, mark as a switch and break the loop: 
				shouldSwitch=true; break; 
				} 
			} 
			if (shouldSwitch) { 
				/*If a switch has been marked, make the switch and mark that a switch has been done:*/ 
				rows[i].parentNode.insertBefore(rows[i + 1], rows[i]); 
				switching=true; } 
				} 
			}			
		</script>
	</body>
</html>
